<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Hygge - 個人生活管理平台，整合待辦清單、番茄鐘、喝水提醒等工具"
    />
    <title>Hygge - 個人生活管理平台（升級版）</title>
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <!-- ========== 1. 導覽列 ========== -->
    <header class="navbar">
      <div class="container">
        <div class="logo">
          <span class="logo-icon">🏠</span>
          <span class="logo-text">Hygge</span>
        </div>
        <nav class="nav-menu">
          <button class="btn-icon" aria-label="設定">
            <span>⚙️</span>
          </button>
        </nav>
      </div>
    </header>

    <!-- ========== 2. 主工作區域（並排顯示） ========== -->
    <main class="workspace" id="workspace">
      <!-- 歡迎訊息 -->
      <div class="welcome-message">
        <h1>歡迎來到 Hygge</h1>
        <p>點擊下方工具開始管理你的一天</p>
      </div>

      <!-- ========== 待辦清單卡片 ========== -->
      <div class="widget-card" id="todo-widget" data-widget="todo">
        <div class="card-header">
          <h2>📝 待辦清單</h2>
          <button class="close-btn" data-close="todo">✕</button>
        </div>

        <div class="card-body">
          <!-- 新增待辦表單 -->
          <div class="todo-input-group">
            <input
              type="text"
              id="todo-input"
              placeholder="輸入新的待辦事項..."
              maxlength="50"
            />
            <button id="add-todo-btn">新增</button>
          </div>

          <!-- 待辦清單容器 -->
          <ul id="todo-list" class="todo-list"></ul>

          <!-- 空狀態提示 -->
          <div id="todo-empty" class="empty-state">
            <p>🎉 目前沒有待辦事項</p>
            <p class="empty-hint">開始新增一個吧！</p>
          </div>
        </div>

        <div class="card-footer">
          <span id="todo-count">共 0 項</span>
          <button id="clear-completed-btn">清除已完成</button>
        </div>
      </div>

      <!-- ========== 番茄鐘卡片 ========== -->
      <div class="widget-card" id="pomodoro-widget" data-widget="pomodoro">
        <div class="card-header">
          <h2>🍅 番茄鐘</h2>
          <button class="close-btn" data-close="pomodoro">✕</button>
        </div>

        <div class="card-body">
          <!-- 時間顯示 -->
          <div class="timer-display" id="timer-display">
            <span id="timer-minutes">25</span>
            <span class="timer-colon">:</span>
            <span id="timer-seconds">00</span>
          </div>

          <!-- 進度條 -->
          <div class="timer-progress">
            <div class="timer-progress-bar" id="progress-bar"></div>
          </div>

          <!-- 狀態提示 -->
          <p class="timer-status" id="timer-status">準備開始專注 25 分鐘</p>

          <!-- 控制按鈕 -->
          <div class="timer-controls">
            <button id="start-btn" class="control-btn primary">
              <span>▶</span> 開始
            </button>
            <button id="pause-btn" class="control-btn" disabled>
              <span>⏸</span> 暫停
            </button>
            <button id="reset-btn" class="control-btn">
              <span>↻</span> 重置
            </button>
          </div>

          <!-- 設定區 -->
          <div class="timer-settings">
            <div class="setting-item">
              <label>工作時間（分鐘）</label>
              <input
                type="number"
                id="work-time-input"
                value="25"
                min="1"
                max="60"
              />
            </div>
            <div class="setting-item">
              <label>休息時間（分鐘）</label>
              <input
                type="number"
                id="break-time-input"
                value="5"
                min="1"
                max="30"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- ========== 🆕 喝水提醒卡片 ========== -->
      <!-- ========== 🆕 喝水提醒卡片（優化版） ========== -->
      <div class="widget-card" id="water-widget" data-widget="water">
        <div class="card-header">
          <h2>💧 喝水提醒</h2>
          <button class="close-btn" data-close="water">✕</button>
        </div>

        <div class="card-body">
          <!-- 喝水顯示區 -->
          <div class="water-display">
            <div class="water-icon">💧</div>

            <!-- 已喝水量顯示 -->
            <div class="water-stats">
              <div class="stat-item">
                <span class="stat-label">今日已喝</span>
                <span class="stat-value" id="water-amount-ml">0 ml</span>
              </div>
              <div class="stat-divider">/</div>
              <div class="stat-item">
                <span class="stat-label">目標</span>
                <span class="stat-value" id="water-goal-ml">2000 ml</span>
              </div>
            </div>

            <!-- 完成百分比 -->
            <div class="water-percentage" id="water-percentage">0%</div>
          </div>

          <!-- 進度條 -->
          <div class="water-progress">
            <div class="water-progress-bar" id="water-progress-bar">
              <span class="progress-text" id="progress-text">0 ml</span>
            </div>
          </div>

          <!-- 🆕 水杯容量選擇 -->
          <div class="cup-size-section">
            <label class="section-label">選擇水杯容量</label>
            <div class="cup-size-options" id="cup-size-options">
              <button class="cup-btn" data-size="150">
                <span class="cup-icon">🥛</span>
                <span class="cup-label">150ml</span>
              </button>
              <button class="cup-btn active" data-size="250">
                <span class="cup-icon">☕</span>
                <span class="cup-label">250ml</span>
              </button>
              <button class="cup-btn" data-size="350">
                <span class="cup-icon">🍵</span>
                <span class="cup-label">350ml</span>
              </button>
              <button class="cup-btn" data-size="500">
                <span class="cup-icon">🥤</span>
                <span class="cup-label">500ml</span>
              </button>
            </div>
          </div>

          <!-- 控制按鈕 -->
          <div class="water-controls">
            <button id="add-water-btn" class="water-btn">
              <span>💧</span> 喝一杯 <span id="current-cup-size">(250ml)</span>
            </button>
            <button id="reset-water-btn" class="water-btn secondary">
              <span>↻</span> 重置今日
            </button>
          </div>

          <!-- 提醒設定 -->
          <div class="water-settings">
            <!-- 每日目標設定 -->
            <div class="setting-item">
              <label>
                <span class="setting-icon">🎯</span> 每日目標（毫升）
              </label>
              <input
                type="number"
                id="water-goal-input"
                value="2000"
                min="500"
                max="5000"
                step="100"
              />
            </div>

            <!-- 提醒間隔 -->
            <div class="setting-item">
              <label>
                <span class="setting-icon">⏰</span> 提醒間隔（分鐘）
              </label>
              <input
                type="number"
                id="reminder-time"
                value="60"
                min="15"
                max="180"
                step="15"
              />
            </div>

            <!-- 提醒開關 -->
            <div class="water-reminder-toggle">
              <span class="toggle-label">
                <span class="setting-icon">🔔</span> 定時提醒
              </span>
              <label class="switch">
                <input type="checkbox" id="reminder-toggle" checked />
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <!-- 快速提示 -->
          <div class="water-tips" id="water-tips">
            <p class="tip-text">💡 建議每日飲水量：2000-2500ml</p>
          </div>
        </div>
      </div>
      <!-- ========== 📒 筆記卡片 ========== -->
      <div class="widget-card" id="note-widget" data-widget="note">
        <div class="card-header">
          <h2>📒 筆記</h2>
          <button class="close-btn" data-close="note">✕</button>
        </div>

        <div class="card-body">
          <!-- 新增筆記表單 -->
          <div class="note-input-section">
            <input
              type="text"
              id="note-title-input"
              class="note-title-input"
              placeholder="筆記標題..."
              maxlength="50"
            />

            <textarea
              id="note-content-input"
              class="note-content-input"
              placeholder="輸入筆記內容...&#10;可以多行書寫..."
              rows="6"
            ></textarea>

            <button id="save-note-btn" class="btn-primary">💾 儲存筆記</button>
          </div>

          <!-- 筆記列表 -->
          <div class="notes-divider">
            <span>已儲存的筆記</span>
          </div>

          <div id="notes-list" class="notes-list">
            <!-- 筆記項目會動態插入這裡 -->
          </div>

          <!-- 空狀態 -->
          <div id="notes-empty" class="empty-state">
            <p>📝 還沒有筆記</p>
            <p class="empty-hint">開始記錄你的想法吧！</p>
          </div>
        </div>
      </div>

      <!-- ========== 🌤️ 天氣卡片 ========== -->
      <div class="widget-card" id="weather-widget" data-widget="weather">
        <div class="card-header">
          <h2>🌤️ 天氣</h2>
          <button class="close-btn" data-close="weather">✕</button>
        </div>

        <div class="card-body">
          <!-- 天氣顯示區 -->
          <div class="weather-display">
            <!-- 天氣圖示 -->
            <div class="weather-icon" id="weather-icon">☀️</div>

            <!-- 天氣描述 -->
            <div class="weather-description" id="weather-description">
              載入中...
            </div>

            <!-- 溫度顯示 -->
            <div class="weather-temp" id="weather-temp">--°C</div>

            <!-- 城市名稱 -->
            <div class="weather-location" id="weather-location">📍 高雄市</div>
          </div>

          <!-- 詳細資訊 -->
          <div class="weather-details">
            <div class="weather-detail-item">
              <span class="detail-label">體感溫度</span>
              <span class="detail-value" id="feels-like">--°C</span>
            </div>

            <div class="weather-detail-item">
              <span class="detail-label">濕度</span>
              <span class="detail-value" id="humidity">--%</span>
            </div>

            <div class="weather-detail-item">
              <span class="detail-label">風速</span>
              <span class="detail-value" id="wind-speed">-- m/s</span>
            </div>

            <div class="weather-detail-item">
              <span class="detail-label">氣壓</span>
              <span class="detail-value" id="pressure">-- hPa</span>
            </div>
          </div>

          <!-- 更新時間 -->
          <div class="weather-update">
            <span id="update-time">載入中...</span>
            <button id="refresh-weather-btn" class="refresh-btn">
              🔄 更新
            </button>
          </div>

          <!-- 城市設定 -->
          <div class="weather-settings">
            <div class="setting-item">
              <label>城市</label>
              <input
                type="text"
                id="city-input"
                value="Kaohsiung"
                placeholder="輸入城市名稱（英文）"
              />
            </div>
            <button id="change-city-btn" class="btn-primary">更換城市</button>
          </div>
        </div>
      </div>

      <!-- ========== 🗓 周計劃卡片 ========== -->
      <div class="widget-card" id="weekly-widget" data-widget="weekly">
        <div class="card-header">
          <h2>
            🗓 周計劃
            <span id="week-range" style="font-size: 0.8rem; color: #999"></span>
          </h2>
          <button class="close-btn" data-close="weekly">✕</button>
        </div>

        <div class="card-body weekly-body">
          <div class="week-grid">
            <div class="day-column" data-day="mon">
              <h3>一</h3>
              <ul class="day-task-list"></ul>
            </div>
            <div class="day-column" data-day="tue">
              <h3>二</h3>
              <ul class="day-task-list"></ul>
            </div>
            <div class="day-column" data-day="wed">
              <h3>三</h3>
              <ul class="day-task-list"></ul>
            </div>
            <div class="day-column" data-day="thu">
              <h3>四</h3>
              <ul class="day-task-list"></ul>
            </div>
            <div class="day-column" data-day="fri">
              <h3>五</h3>
              <ul class="day-task-list"></ul>
            </div>
            <div class="day-column" data-day="sat">
              <h3>六</h3>
              <ul class="day-task-list"></ul>
            </div>
            <div class="day-column" data-day="sun">
              <h3>日</h3>
              <ul class="day-task-list"></ul>
            </div>
          </div>
        </div>
      </div>

      <!-- ========== 📊 甘特圖卡片 ========== -->
      <div class="widget-card" id="gantt-widget" data-widget="gantt">
        <div class="card-header">
          <h2>📊 專案進度（甘特圖）</h2>
          <button class="close-btn" data-close="gantt">✕</button>
        </div>

        <div class="card-body gantt-body">
          <div class="gantt-header">
            <span>專案</span>
            <span>進度</span>
          </div>

          <div id="gantt-list" class="gantt-list">
            <!-- 甘特條由 JS 產生 -->
            <!-- 測試用範例 -->
            <div class="gantt-item">
              <div class="gantt-title">Hygge</div>
              <div class="gantt-bar">
                <div class="gantt-progress" style="width: 40%"></div>
              </div>
            </div>

            <div class="gantt-item">
              <div class="gantt-title">作品集</div>
              <div class="gantt-bar">
                <div class="gantt-progress" style="width: 70%"></div>
              </div>
            </div>
          </div>

          <div class="gantt-empty empty-state">
            <p>📌 尚未有專案任務</p>
            <p class="empty-hint">可從待辦事項加入專案</p>
          </div>
        </div>
      </div>
    </main>

    <!-- ========== 3. Dock 工具列 ========== -->
    <div class="dock" id="dock">
      <div class="dock-container">
        <!-- 待辦清單 -->
        <div class="dock-item" data-widget="todo">
          <span class="dock-icon">📝</span>
          <span class="dock-label">待辦清單</span>
        </div>

        <!-- 番茄鐘 -->
        <div class="dock-item" data-widget="pomodoro">
          <span class="dock-icon">🍅</span>
          <span class="dock-label">番茄鐘</span>
        </div>

        <!-- 🆕 喝水提醒 -->
        <div class="dock-item" data-widget="water">
          <span class="dock-icon">💧</span>
          <span class="dock-label">喝水提醒</span>
        </div>

        <!-- 天氣（開發中） -->
        <div class="dock-item" data-widget="weather">
          <span class="dock-icon">🌤️</span>
          <span class="dock-label">天氣</span>
        </div>

        <!-- 筆記（開發中） -->
        <div class="dock-item" data-widget="note">
          <span class="dock-icon">📒</span>
          <span class="dock-label">筆記</span>
        </div>
        <!-- 周計劃（開發中） -->
        <div class="dock-item" data-widget="weekly">
          <span class="dock-icon">🗓</span>
          <span class="dock-label">周計劃</span>
          <div class="week-grid">
            <!-- 這裡用 JS 生成每個 day 的 task -->
          </div>
        </div>

        <!-- 甘特圖（開發中） -->
        <div class="dock-item" data-widget="gantt">
          <span class="dock-icon">📊</span>
          <span class="dock-label">甘特圖</span>
        </div>
      </div>
    </div>
    <!-- ========== 編輯待辦對話框 ========== -->
    <div class="modal-overlay" id="edit-modal-overlay">
      <div class="edit-modal">
        <div class="modal-header">
          <h3>✏️ 編輯待辦事項</h3>
          <button class="modal-close-btn" id="close-edit-modal">✕</button>
        </div>

        <div class="modal-body">
          <!-- 任務標題 -->
          <div class="form-group">
            <label>任務標題</label>
            <input
              type="text"
              id="edit-todo-text"
              placeholder="輸入任務標題..."
              maxlength="50"
            />
          </div>

          <!-- 專案 -->
          <div class="form-group">
            <label>專案分類</label>
            <select id="edit-todo-project">
              <option value="">無專案</option>
              <option value="Hygge">Hygge</option>
              <option value="作品集">作品集</option>
              <option value="學習">學習</option>
              <option value="運動">運動</option>
              <option value="生活">生活</option>
            </select>
          </div>

          <!-- 星期 -->
          <div class="form-group">
            <label>分配到星期</label>
            <select id="edit-todo-weekday">
              <option value="">不分配</option>
              <option value="mon">星期一</option>
              <option value="tue">星期二</option>
              <option value="wed">星期三</option>
              <option value="thu">星期四</option>
              <option value="fri">星期五</option>
              <option value="sat">星期六</option>
              <option value="sun">星期日</option>
            </select>
          </div>

          <!-- 進度 -->
          <div class="form-group">
            <label>完成進度 <span id="progress-value">0%</span></label>
            <input
              type="range"
              id="edit-todo-progress"
              min="0"
              max="100"
              value="0"
              step="5"
            />
          </div>

          <!-- 優先級 -->
          <div class="form-group">
            <label>優先級</label>
            <div class="priority-options">
              <button class="priority-btn" data-priority="high">🔴 高</button>
              <button class="priority-btn" data-priority="medium">🟡 中</button>
              <button class="priority-btn" data-priority="low">🟢 低</button>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button id="cancel-edit-btn" class="btn-secondary">取消</button>
          <button id="save-edit-btn" class="btn-primary">儲存</button>
        </div>
      </div>
    </div>
    <script src="./js/app.js"></script>
  </body>
</html>
